version: 3

#################################################
#            computational domian               #
#################################################
domain:
  min_max_dep: [-29.0, 471.0]  # depth in km
  min_max_lat: [30.0, 50.0]   # latitude in degree
  min_max_lon: [15.0, 40.0]   # longitude in degree
  n_rtp: [161, 161, 161]         # number of nodes

source:
  src_rec_file: src_rec_true.dat    # source receiver file (if found, src_dep_lat_lon is ignored)
  # src_rec_file : 'eg3_地震定位简易测试/src_rec_init_loc_single.dat' # source receiver file (if found, src_dep_lat_lon is ignored)
  swap_src_rec: false                # swap source and receiver (1: yes, 0: no)

model:
  init_model_path: models/model_N161_161_161.h5    # path to initial model file (ignored if init_model_type is '1d_*')

parallel: # parameters for parallel computation
  n_sims: 1          # number of simultaneous run
  ndiv_rtp: [2, 1, 1] # number of subdomains
  nproc_sub: 1       # number of subprocess used for each subdomain

output_setting:
  output_dir: OUTPUT_FILES_N161_161_161 # path to output director (default is ./OUTPUT_FILES/)
  output_source_field: false # output the calculated field of all sources                            1 for yes; 0 for no;  default: 1
  output_model_dat: false # output model_parameters_inv_0000.dat or not.                          1 for yes; 0 for no;  default: 1
  output_final_model: true # output merged final model or not.                                     1 for yes; 0 for no;  default: 1
  output_in_process: true # output model at each inv iteration or not.                            1 for yes; 0 for no;  default: 1
  single_precision_output: false # output results in single precision or not.                            1 for yes; 0 for no;  default: 0
  verbose_output_level: 0 # output internal parameters, if 0, only model parameters are out. Higher level, more internal parameters are output. default: 0
  output_file_format: 0 # in/output file format, if 0: HDF5, if 1: ASCII


#################################################
#          inversion or forward modeling        #
#################################################
# run mode
# 0 for forward simulation only,
# 1 for inversion
# 2 for earthquake relocation
# 3 for inversion+earthquake relocation
run_mode: 0


# --- parameters for core solver ---------------------------------------------------------
# --- please do not change the following parameters unless you know what you are doing ---

########################################################################
#            Scheme of Eikonal solver (fast sweeping method)           #
########################################################################
calculation:
  convergence_tolerance: 1e-5
  max_iterations: 500  # max itertions for forward simulation
  stencil_order: 1  # 1 or 3
  stencil_type: 1   # 1 for upwind (only valid for stencil_order = 1)
  sweep_type: 0     # 0: legacy, 1: cuthill-mckee with shm parallelization

