version : 2

domain :
  min_max_dep : [-10.0, 40.0] # depth in km with R = 6371.0
  min_max_lat : [-2.0,2.4]    # latitude in degree
  min_max_lon : [-0.8,0.8]    # longitude in degree
  n_rtp : [51,51,51]           # number of nodes

source :
  src_rec_file : 'src_rec_inv_test.dat' # source receiver file (if found, src_dep_lat_lon is ignored)
  swap_src_rec : 1                      # swap source and receiver

model :
  init_model_path : 'model_init_N51_51_51.h5' # path to initial model file (ignored if init_model_type is '1d_*')
  model_1d_name : 'iasp91' # the name of 1d model for teleseismic tomography

inversion :
  run_mode : 0     # 0 for forward simulation only, 1 for inversion   2 for teleseismic preprocess, 3 for relocation (2,3, no use now)
  optim_method : 0 # optimization method. 0 : "grad_descent", 1 : "halve-stepping", 2 : "lbfgs"
  n_inversion_grid : 8  # number of inversion grid sets

  n_inv_dep_lat_lon : [12,11,11] # number of the base inversion grid points
  min_max_dep_inv : [-29.0, 301.0] # depth in km with R = 6371.0
  min_max_lat_inv : [30.0,50.0] # latitude in degree
  min_max_lon_inv : [15.0,40.0] # longitude in degree
  # n_inv_dep : 13
  # min_max_dep_inv : [-25.0, 850.0]
  type_dep_inv : 1  # 0: uniform inversion grid (above),  1: flexible grid, manually designed (following)
  dep_inv : [-7.0, -3.0, 0.0, 3.0, 7.0, 12.0, 18.0, 25.0, 33.0, 42.0, 52.0, 63.0]

  # n_inv_lat : 12
  # min_max_lat_inv : [11.0, 22.0]
  type_lat_inv : 1  # 0: uniform inversion grid (above),  1: flexible grid, manually designed (following)
  lat_inv : [-2.4, -2.0, -1.6, -1.2, -0.8, -0.4, 0.0, 0.4, 0.8, 1.2, 1.6, 2.0, 2.4, 2.8]

  # n_inv_lon : 12
  # min_max_lon_inv : [96.0, 107.0]
  type_lon_inv : 1  # 0: uniform inversion grid (above),  1: flexible grid, manually designed (following)
  lon_inv : [-0.9, -0.6, -0.3, 0.0, 0.3, 0.6, 0.9]

  max_sub_iterations : 1000 # maximum number of sub-iterations
  max_iterations_inv : 20  # maximum number of inversion iterations
  step_size : 0.01  # step size for inversion

inv_strategy :
  is_inv_slowness : 1   # update slowness (velocity) or not.              1 for yes; 0 for no;  default: 1
  is_inv_azi_ani  : 1   # update azimuthal anisotropy (xi, eta) or not.   1 for yes; 0 for no;  default: 0
  is_inv_rad_ani  : 1   # update radial anisotropy (in future) or not.    1 for yes; 0 for no;  default: 0
  kernel_taper : [-200.0, -100.0]  # kernel weight : depth.  -->  0: -inf ~ taper[0]; 0 ~ 1 : taper[0] ~ taper[1]; 1 : taper[1] ~ inf


parallel :
  n_sims : 8         # number of simultaneous run
  ndiv_rtp : [1,1,1] # number of subdomains
  nproc_sub : 1      # number of subprocess used for each subdomain

calculation :
  convergence_tolerance : 1e-4
  max_iterations : 100
  stencil_order : 3 # 1 or 3
  sweep_type : 0    # 0: legacy, 1: cuthill-mckee. 2: cuthill-mckee with shm parallelization
  output_file_format : 0 # 0: hdf5, 1: ascii

output_setting :
  is_output_source_field : 0      # output out_data_sim_X.h or not.                 1 for yes; 0 for no;  default: 1
  is_output_model_dat : 1         # output model_parameters_inv_0000.dat or not.    1 for yes; 0 for no;  default: 1

